<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: graphics/drawable-group.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: graphics/drawable-group.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { vec3 } from "gl-matrix";
import { Drawable } from "./drawable.js";
import { Mesh } from "./mesh.js";

class DrawableGroup extends Drawable {

    /**
     * 
     * @type {number}
     */
    idx = 0;

    constructor(shader, texture) {
        super(
            new Mesh(), 
            shader, 
            texture
        );

        if(shader.shaderData.attribs["index"] != -1) {
            this.mesh.createBuffer("index", 0);        
        }
        if(shader.shaderData.attribs["positions"] != -1) {
            this.mesh.createBuffer("positions", 3);
        }
        if(shader.shaderData.attribs["uvs"] != -1) {
            this.mesh.createBuffer("uvs", 2);
        }
        if(shader.shaderData.attribs["colors"] != -1) {
            this.mesh.createBuffer("colors", 4);
        }
    }

    add(drawable) {
        drawable.updateMatrix();

        this.mesh.buffers.forEach((info, name) => {

            const data = drawable.mesh.getBuffer(name).data;
            
            switch(name) {
                case "positions": 
                    for(let i = 0; i &lt; data.length; i += 3) {
                        const vec = vec3.fromValues(data[i], data[i + 1], data[i + 2]);

                        vec3.transformMat4(vec, vec, drawable.modelMatrix);

                        for(let j = 0; j &lt; 3; ++j) {
                            info.data.push(vec[j]);
                        }
                    }
                    
                    break;
                case "index":
                    for (let i = 0; i &lt; data.length; ++i) {
                        info.data.push(data[i] + this.idx);
                    }
                    break;
                default:
                    for (let i = 0; i &lt; data.length; ++i) {
                        info.data.push(data[i]);
                    }
            }

        });

        this.idx += count;
    }

}

export {
    DrawableGroup
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Game.html">Game</a></li><li><a href="Gol.html">Gol</a></li><li><a href="Screen.html">Screen</a></li><li><a href="Shader.html">Shader</a></li><li><a href="Texture.html">Texture</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Sat Jun 25 2022 20:57:13 GMT+0200 (Středoevropský letní čas)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
