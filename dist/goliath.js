var Gr=Object.defineProperty;var b1=(r,e,n)=>e in r?Gr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n;var b=(r,e)=>{for(var n in e)Gr(r,n,{get:e[n],enumerable:!0})};var U=(r,e,n)=>(b1(r,typeof e!="symbol"?e+"":e,n),n);var J=class{assets=new Map;toLoad=0;loadImage(e,n){let a=new Image;a.src=n,a.crossOrigin="Anonymous";let i=new Promise(t=>{a.onload=()=>{t(a)}});return this.addAsync(e,i),i}loadAudio(e,n){let a=new Audio(n);a.load();let i=new Promise(t=>{a.oncanplaythrough=()=>{t(a)}});return this.addAsync(e,i),i}addAsync(e,n){++this.toLoad,n.then(a=>{this.assets.set(e,a),--this.toLoad})}waitForAssetsToLoad(){return new Promise(e=>{this.toLoad==0?e(this.assets):setTimeout(()=>{this.waitForAssetsToLoad()},250)})}get(e){return this.assets.get(e)}};var yr=class{constructor(){}preload(){}create(){}resize(e,n){}render(e){}};var K=class{canvas;gl;frameId=null;width;height;delta=0;fps=60;lastFrameTime;frameStart;frames;game;constructor(e){this.game=e,this.canvas=this.createCanvas(),this.canvas.width=this.width=innerWidth,this.canvas.height=this.height=innerHeight,this.gl=this.canvas.getContext("webgl")}onResume(){this.lastFrameTime=this.frameStart=performance.now(),this.frames=0,this.RAF()}createCanvas(){let e=document.createElement("canvas");return document.body.appendChild(e),e}onResize(){this.canvas.width=this.width=innerWidth,this.canvas.height=this.height=innerHeight,this.game.resize(this.width,this.height)}onDrawFrame(){let e=performance.now();this.delta=(e-this.lastFrameTime)*.001,this.lastFrameTime=e,this.game.render(this.delta),e-this.frameStart>=1e3&&(this.fps=this.frames,this.frames=0,this.frameStart=e),++this.frames}RAF(){this.frameId=requestAnimationFrame(()=>{this.RAF(),this.onDrawFrame()})}};var V1={};b(V1,{Camera:()=>H,Cube:()=>hr,Drawable:()=>lr,Mesh:()=>j,PerspectiveCamera:()=>Mr,Quad:()=>mr,Shader:()=>X,ShaderInstance:()=>pr,Texture:()=>fr});var F1={};b(F1,{glMatrix:()=>V,mat2:()=>dr,mat2d:()=>or,mat3:()=>B,mat4:()=>D,quat:()=>G,quat2:()=>Ur,vec2:()=>Xr,vec3:()=>O,vec4:()=>ar});var V={};b(V,{ARRAY_TYPE:()=>z,EPSILON:()=>o,RANDOM:()=>F,equals:()=>B1,setMatrixArrayType:()=>C1,toRadian:()=>X1});var o=1e-6,z=typeof Float32Array<"u"?Float32Array:Array,F=Math.random;function C1(r){z=r}var U1=Math.PI/180;function X1(r){return r*U1}function B1(r,e){return Math.abs(r-e)<=o*Math.max(1,Math.abs(r),Math.abs(e))}Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});var dr={};b(dr,{LDU:()=>t0,add:()=>s0,adjoint:()=>K1,clone:()=>G1,copy:()=>H1,create:()=>j1,determinant:()=>$1,equals:()=>x0,exactEquals:()=>v0,frob:()=>i0,fromRotation:()=>e0,fromScaling:()=>n0,fromValues:()=>Z1,identity:()=>W1,invert:()=>J1,mul:()=>p0,multiply:()=>Hr,multiplyScalar:()=>c0,multiplyScalarAndAdd:()=>h0,rotate:()=>u1,scale:()=>r0,set:()=>Q1,str:()=>a0,sub:()=>f0,subtract:()=>Wr,transpose:()=>k1});function j1(){var r=new z(4);return z!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r}function G1(r){var e=new z(4);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}function H1(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r}function W1(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r}function Z1(r,e,n,a){var i=new z(4);return i[0]=r,i[1]=e,i[2]=n,i[3]=a,i}function Q1(r,e,n,a,i){return r[0]=e,r[1]=n,r[2]=a,r[3]=i,r}function k1(r,e){if(r===e){var n=e[1];r[1]=e[2],r[2]=n}else r[0]=e[0],r[1]=e[2],r[2]=e[1],r[3]=e[3];return r}function J1(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=n*t-i*a;return s?(s=1/s,r[0]=t*s,r[1]=-a*s,r[2]=-i*s,r[3]=n*s,r):null}function K1(r,e){var n=e[0];return r[0]=e[3],r[1]=-e[1],r[2]=-e[2],r[3]=n,r}function $1(r){return r[0]*r[3]-r[2]*r[1]}function Hr(r,e,n){var a=e[0],i=e[1],t=e[2],s=e[3],v=n[0],x=n[1],c=n[2],h=n[3];return r[0]=a*v+t*x,r[1]=i*v+s*x,r[2]=a*c+t*h,r[3]=i*c+s*h,r}function u1(r,e,n){var a=e[0],i=e[1],t=e[2],s=e[3],v=Math.sin(n),x=Math.cos(n);return r[0]=a*x+t*v,r[1]=i*x+s*v,r[2]=a*-v+t*x,r[3]=i*-v+s*x,r}function r0(r,e,n){var a=e[0],i=e[1],t=e[2],s=e[3],v=n[0],x=n[1];return r[0]=a*v,r[1]=i*v,r[2]=t*x,r[3]=s*x,r}function e0(r,e){var n=Math.sin(e),a=Math.cos(e);return r[0]=a,r[1]=n,r[2]=-n,r[3]=a,r}function n0(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=e[1],r}function a0(r){return"mat2("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+")"}function i0(r){return Math.hypot(r[0],r[1],r[2],r[3])}function t0(r,e,n,a){return r[2]=a[2]/a[0],n[0]=a[0],n[1]=a[1],n[3]=a[3]-r[2]*n[1],[r,e,n]}function s0(r,e,n){return r[0]=e[0]+n[0],r[1]=e[1]+n[1],r[2]=e[2]+n[2],r[3]=e[3]+n[3],r}function Wr(r,e,n){return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],r[3]=e[3]-n[3],r}function v0(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]}function x0(r,e){var n=r[0],a=r[1],i=r[2],t=r[3],s=e[0],v=e[1],x=e[2],c=e[3];return Math.abs(n-s)<=o*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(a-v)<=o*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(i-x)<=o*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(t-c)<=o*Math.max(1,Math.abs(t),Math.abs(c))}function c0(r,e,n){return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r}function h0(r,e,n,a){return r[0]=e[0]+n[0]*a,r[1]=e[1]+n[1]*a,r[2]=e[2]+n[2]*a,r[3]=e[3]+n[3]*a,r}var p0=Hr,f0=Wr;var or={};b(or,{add:()=>I0,clone:()=>M0,copy:()=>m0,create:()=>l0,determinant:()=>A0,equals:()=>_0,exactEquals:()=>O0,frob:()=>S0,fromRotation:()=>P0,fromScaling:()=>z0,fromTranslation:()=>T0,fromValues:()=>y0,identity:()=>g0,invert:()=>o0,mul:()=>q0,multiply:()=>Zr,multiplyScalar:()=>Y0,multiplyScalarAndAdd:()=>N0,rotate:()=>E0,scale:()=>R0,set:()=>d0,str:()=>L0,sub:()=>D0,subtract:()=>Qr,translate:()=>w0});function l0(){var r=new z(6);return z!=Float32Array&&(r[1]=0,r[2]=0,r[4]=0,r[5]=0),r[0]=1,r[3]=1,r}function M0(r){var e=new z(6);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e}function m0(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r}function g0(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=0,r[5]=0,r}function y0(r,e,n,a,i,t){var s=new z(6);return s[0]=r,s[1]=e,s[2]=n,s[3]=a,s[4]=i,s[5]=t,s}function d0(r,e,n,a,i,t,s){return r[0]=e,r[1]=n,r[2]=a,r[3]=i,r[4]=t,r[5]=s,r}function o0(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=e[4],v=e[5],x=n*t-a*i;return x?(x=1/x,r[0]=t*x,r[1]=-a*x,r[2]=-i*x,r[3]=n*x,r[4]=(i*v-t*s)*x,r[5]=(a*s-n*v)*x,r):null}function A0(r){return r[0]*r[3]-r[1]*r[2]}function Zr(r,e,n){var a=e[0],i=e[1],t=e[2],s=e[3],v=e[4],x=e[5],c=n[0],h=n[1],p=n[2],l=n[3],f=n[4],m=n[5];return r[0]=a*c+t*h,r[1]=i*c+s*h,r[2]=a*p+t*l,r[3]=i*p+s*l,r[4]=a*f+t*m+v,r[5]=i*f+s*m+x,r}function E0(r,e,n){var a=e[0],i=e[1],t=e[2],s=e[3],v=e[4],x=e[5],c=Math.sin(n),h=Math.cos(n);return r[0]=a*h+t*c,r[1]=i*h+s*c,r[2]=a*-c+t*h,r[3]=i*-c+s*h,r[4]=v,r[5]=x,r}function R0(r,e,n){var a=e[0],i=e[1],t=e[2],s=e[3],v=e[4],x=e[5],c=n[0],h=n[1];return r[0]=a*c,r[1]=i*c,r[2]=t*h,r[3]=s*h,r[4]=v,r[5]=x,r}function w0(r,e,n){var a=e[0],i=e[1],t=e[2],s=e[3],v=e[4],x=e[5],c=n[0],h=n[1];return r[0]=a,r[1]=i,r[2]=t,r[3]=s,r[4]=a*c+t*h+v,r[5]=i*c+s*h+x,r}function P0(r,e){var n=Math.sin(e),a=Math.cos(e);return r[0]=a,r[1]=n,r[2]=-n,r[3]=a,r[4]=0,r[5]=0,r}function z0(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=e[1],r[4]=0,r[5]=0,r}function T0(r,e){return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=e[0],r[5]=e[1],r}function L0(r){return"mat2d("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+")"}function S0(r){return Math.hypot(r[0],r[1],r[2],r[3],r[4],r[5],1)}function I0(r,e,n){return r[0]=e[0]+n[0],r[1]=e[1]+n[1],r[2]=e[2]+n[2],r[3]=e[3]+n[3],r[4]=e[4]+n[4],r[5]=e[5]+n[5],r}function Qr(r,e,n){return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],r[3]=e[3]-n[3],r[4]=e[4]-n[4],r[5]=e[5]-n[5],r}function Y0(r,e,n){return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r[4]=e[4]*n,r[5]=e[5]*n,r}function N0(r,e,n,a){return r[0]=e[0]+n[0]*a,r[1]=e[1]+n[1]*a,r[2]=e[2]+n[2]*a,r[3]=e[3]+n[3]*a,r[4]=e[4]+n[4]*a,r[5]=e[5]+n[5]*a,r}function O0(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]}function _0(r,e){var n=r[0],a=r[1],i=r[2],t=r[3],s=r[4],v=r[5],x=e[0],c=e[1],h=e[2],p=e[3],l=e[4],f=e[5];return Math.abs(n-x)<=o*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(a-c)<=o*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(i-h)<=o*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(t-p)<=o*Math.max(1,Math.abs(t),Math.abs(p))&&Math.abs(s-l)<=o*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(v-f)<=o*Math.max(1,Math.abs(v),Math.abs(f))}var q0=Zr,D0=Qr;var B={};b(B,{add:()=>ie,adjoint:()=>G0,clone:()=>V0,copy:()=>b0,create:()=>Ar,determinant:()=>H0,equals:()=>xe,exactEquals:()=>ve,frob:()=>ae,fromMat2d:()=>$0,fromMat4:()=>F0,fromQuat:()=>u0,fromRotation:()=>J0,fromScaling:()=>K0,fromTranslation:()=>k0,fromValues:()=>C0,identity:()=>X0,invert:()=>j0,mul:()=>ce,multiply:()=>kr,multiplyScalar:()=>te,multiplyScalarAndAdd:()=>se,normalFromMat4:()=>re,projection:()=>ee,rotate:()=>Z0,scale:()=>Q0,set:()=>U0,str:()=>ne,sub:()=>he,subtract:()=>Jr,translate:()=>W0,transpose:()=>B0});function Ar(){var r=new z(9);return z!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function F0(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[4],r[4]=e[5],r[5]=e[6],r[6]=e[8],r[7]=e[9],r[8]=e[10],r}function V0(r){var e=new z(9);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e}function b0(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function C0(r,e,n,a,i,t,s,v,x){var c=new z(9);return c[0]=r,c[1]=e,c[2]=n,c[3]=a,c[4]=i,c[5]=t,c[6]=s,c[7]=v,c[8]=x,c}function U0(r,e,n,a,i,t,s,v,x,c){return r[0]=e,r[1]=n,r[2]=a,r[3]=i,r[4]=t,r[5]=s,r[6]=v,r[7]=x,r[8]=c,r}function X0(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function B0(r,e){if(r===e){var n=e[1],a=e[2],i=e[5];r[1]=e[3],r[2]=e[6],r[3]=n,r[5]=e[7],r[6]=a,r[7]=i}else r[0]=e[0],r[1]=e[3],r[2]=e[6],r[3]=e[1],r[4]=e[4],r[5]=e[7],r[6]=e[2],r[7]=e[5],r[8]=e[8];return r}function j0(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=e[4],v=e[5],x=e[6],c=e[7],h=e[8],p=h*s-v*c,l=-h*t+v*x,f=c*t-s*x,m=n*p+a*l+i*f;return m?(m=1/m,r[0]=p*m,r[1]=(-h*a+i*c)*m,r[2]=(v*a-i*s)*m,r[3]=l*m,r[4]=(h*n-i*x)*m,r[5]=(-v*n+i*t)*m,r[6]=f*m,r[7]=(-c*n+a*x)*m,r[8]=(s*n-a*t)*m,r):null}function G0(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=e[4],v=e[5],x=e[6],c=e[7],h=e[8];return r[0]=s*h-v*c,r[1]=i*c-a*h,r[2]=a*v-i*s,r[3]=v*x-t*h,r[4]=n*h-i*x,r[5]=i*t-n*v,r[6]=t*c-s*x,r[7]=a*x-n*c,r[8]=n*s-a*t,r}function H0(r){var e=r[0],n=r[1],a=r[2],i=r[3],t=r[4],s=r[5],v=r[6],x=r[7],c=r[8];return e*(c*t-s*x)+n*(-c*i+s*v)+a*(x*i-t*v)}function kr(r,e,n){var a=e[0],i=e[1],t=e[2],s=e[3],v=e[4],x=e[5],c=e[6],h=e[7],p=e[8],l=n[0],f=n[1],m=n[2],g=n[3],M=n[4],y=n[5],R=n[6],A=n[7],E=n[8];return r[0]=l*a+f*s+m*c,r[1]=l*i+f*v+m*h,r[2]=l*t+f*x+m*p,r[3]=g*a+M*s+y*c,r[4]=g*i+M*v+y*h,r[5]=g*t+M*x+y*p,r[6]=R*a+A*s+E*c,r[7]=R*i+A*v+E*h,r[8]=R*t+A*x+E*p,r}function W0(r,e,n){var a=e[0],i=e[1],t=e[2],s=e[3],v=e[4],x=e[5],c=e[6],h=e[7],p=e[8],l=n[0],f=n[1];return r[0]=a,r[1]=i,r[2]=t,r[3]=s,r[4]=v,r[5]=x,r[6]=l*a+f*s+c,r[7]=l*i+f*v+h,r[8]=l*t+f*x+p,r}function Z0(r,e,n){var a=e[0],i=e[1],t=e[2],s=e[3],v=e[4],x=e[5],c=e[6],h=e[7],p=e[8],l=Math.sin(n),f=Math.cos(n);return r[0]=f*a+l*s,r[1]=f*i+l*v,r[2]=f*t+l*x,r[3]=f*s-l*a,r[4]=f*v-l*i,r[5]=f*x-l*t,r[6]=c,r[7]=h,r[8]=p,r}function Q0(r,e,n){var a=n[0],i=n[1];return r[0]=a*e[0],r[1]=a*e[1],r[2]=a*e[2],r[3]=i*e[3],r[4]=i*e[4],r[5]=i*e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function k0(r,e){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=e[0],r[7]=e[1],r[8]=1,r}function J0(r,e){var n=Math.sin(e),a=Math.cos(e);return r[0]=a,r[1]=n,r[2]=0,r[3]=-n,r[4]=a,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function K0(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=e[1],r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function $0(r,e){return r[0]=e[0],r[1]=e[1],r[2]=0,r[3]=e[2],r[4]=e[3],r[5]=0,r[6]=e[4],r[7]=e[5],r[8]=1,r}function u0(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=n+n,v=a+a,x=i+i,c=n*s,h=a*s,p=a*v,l=i*s,f=i*v,m=i*x,g=t*s,M=t*v,y=t*x;return r[0]=1-p-m,r[3]=h-y,r[6]=l+M,r[1]=h+y,r[4]=1-c-m,r[7]=f-g,r[2]=l-M,r[5]=f+g,r[8]=1-c-p,r}function re(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=e[4],v=e[5],x=e[6],c=e[7],h=e[8],p=e[9],l=e[10],f=e[11],m=e[12],g=e[13],M=e[14],y=e[15],R=n*v-a*s,A=n*x-i*s,E=n*c-t*s,P=a*x-i*v,w=a*c-t*v,N=i*c-t*x,S=h*g-p*m,I=h*M-l*m,L=h*y-f*m,_=p*M-l*g,Y=p*y-f*g,q=l*y-f*M,T=R*q-A*Y+E*_+P*L-w*I+N*S;return T?(T=1/T,r[0]=(v*q-x*Y+c*_)*T,r[1]=(x*L-s*q-c*I)*T,r[2]=(s*Y-v*L+c*S)*T,r[3]=(i*Y-a*q-t*_)*T,r[4]=(n*q-i*L+t*I)*T,r[5]=(a*L-n*Y-t*S)*T,r[6]=(g*N-M*w+y*P)*T,r[7]=(M*E-m*N-y*A)*T,r[8]=(m*w-g*E+y*R)*T,r):null}function ee(r,e,n){return r[0]=2/e,r[1]=0,r[2]=0,r[3]=0,r[4]=-2/n,r[5]=0,r[6]=-1,r[7]=1,r[8]=1,r}function ne(r){return"mat3("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+")"}function ae(r){return Math.hypot(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8])}function ie(r,e,n){return r[0]=e[0]+n[0],r[1]=e[1]+n[1],r[2]=e[2]+n[2],r[3]=e[3]+n[3],r[4]=e[4]+n[4],r[5]=e[5]+n[5],r[6]=e[6]+n[6],r[7]=e[7]+n[7],r[8]=e[8]+n[8],r}function Jr(r,e,n){return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],r[3]=e[3]-n[3],r[4]=e[4]-n[4],r[5]=e[5]-n[5],r[6]=e[6]-n[6],r[7]=e[7]-n[7],r[8]=e[8]-n[8],r}function te(r,e,n){return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r[4]=e[4]*n,r[5]=e[5]*n,r[6]=e[6]*n,r[7]=e[7]*n,r[8]=e[8]*n,r}function se(r,e,n,a){return r[0]=e[0]+n[0]*a,r[1]=e[1]+n[1]*a,r[2]=e[2]+n[2]*a,r[3]=e[3]+n[3]*a,r[4]=e[4]+n[4]*a,r[5]=e[5]+n[5]*a,r[6]=e[6]+n[6]*a,r[7]=e[7]+n[7]*a,r[8]=e[8]+n[8]*a,r}function ve(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]}function xe(r,e){var n=r[0],a=r[1],i=r[2],t=r[3],s=r[4],v=r[5],x=r[6],c=r[7],h=r[8],p=e[0],l=e[1],f=e[2],m=e[3],g=e[4],M=e[5],y=e[6],R=e[7],A=e[8];return Math.abs(n-p)<=o*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(a-l)<=o*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(i-f)<=o*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(t-m)<=o*Math.max(1,Math.abs(t),Math.abs(m))&&Math.abs(s-g)<=o*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(v-M)<=o*Math.max(1,Math.abs(v),Math.abs(M))&&Math.abs(x-y)<=o*Math.max(1,Math.abs(x),Math.abs(y))&&Math.abs(c-R)<=o*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(h-A)<=o*Math.max(1,Math.abs(h),Math.abs(A))}var ce=kr,he=Jr;var D={};b(D,{add:()=>We,adjoint:()=>de,clone:()=>fe,copy:()=>le,create:()=>pe,determinant:()=>oe,equals:()=>Je,exactEquals:()=>ke,frob:()=>He,fromQuat:()=>De,fromQuat2:()=>Oe,fromRotation:()=>Se,fromRotationTranslation:()=>ur,fromRotationTranslationScale:()=>_e,fromRotationTranslationScaleOrigin:()=>qe,fromScaling:()=>Le,fromTranslation:()=>Te,fromValues:()=>Me,fromXRotation:()=>Ie,fromYRotation:()=>Ye,fromZRotation:()=>Ne,frustum:()=>Fe,getRotation:()=>Rr,getScaling:()=>r1,getTranslation:()=>Er,identity:()=>Kr,invert:()=>ye,lookAt:()=>Be,mul:()=>Ke,multiply:()=>$r,multiplyScalar:()=>Ze,multiplyScalarAndAdd:()=>Qe,ortho:()=>Ue,orthoNO:()=>n1,orthoZO:()=>Xe,perspective:()=>Ve,perspectiveFromFieldOfView:()=>Ce,perspectiveNO:()=>e1,perspectiveZO:()=>be,rotate:()=>Re,rotateX:()=>we,rotateY:()=>Pe,rotateZ:()=>ze,scale:()=>Ee,set:()=>me,str:()=>Ge,sub:()=>$e,subtract:()=>a1,targetTo:()=>je,translate:()=>Ae,transpose:()=>ge});function pe(){var r=new z(16);return z!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r}function fe(r){var e=new z(16);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}function le(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function Me(r,e,n,a,i,t,s,v,x,c,h,p,l,f,m,g){var M=new z(16);return M[0]=r,M[1]=e,M[2]=n,M[3]=a,M[4]=i,M[5]=t,M[6]=s,M[7]=v,M[8]=x,M[9]=c,M[10]=h,M[11]=p,M[12]=l,M[13]=f,M[14]=m,M[15]=g,M}function me(r,e,n,a,i,t,s,v,x,c,h,p,l,f,m,g,M){return r[0]=e,r[1]=n,r[2]=a,r[3]=i,r[4]=t,r[5]=s,r[6]=v,r[7]=x,r[8]=c,r[9]=h,r[10]=p,r[11]=l,r[12]=f,r[13]=m,r[14]=g,r[15]=M,r}function Kr(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function ge(r,e){if(r===e){var n=e[1],a=e[2],i=e[3],t=e[6],s=e[7],v=e[11];r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=n,r[6]=e[9],r[7]=e[13],r[8]=a,r[9]=t,r[11]=e[14],r[12]=i,r[13]=s,r[14]=v}else r[0]=e[0],r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=e[1],r[5]=e[5],r[6]=e[9],r[7]=e[13],r[8]=e[2],r[9]=e[6],r[10]=e[10],r[11]=e[14],r[12]=e[3],r[13]=e[7],r[14]=e[11],r[15]=e[15];return r}function ye(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=e[4],v=e[5],x=e[6],c=e[7],h=e[8],p=e[9],l=e[10],f=e[11],m=e[12],g=e[13],M=e[14],y=e[15],R=n*v-a*s,A=n*x-i*s,E=n*c-t*s,P=a*x-i*v,w=a*c-t*v,N=i*c-t*x,S=h*g-p*m,I=h*M-l*m,L=h*y-f*m,_=p*M-l*g,Y=p*y-f*g,q=l*y-f*M,T=R*q-A*Y+E*_+P*L-w*I+N*S;return T?(T=1/T,r[0]=(v*q-x*Y+c*_)*T,r[1]=(i*Y-a*q-t*_)*T,r[2]=(g*N-M*w+y*P)*T,r[3]=(l*w-p*N-f*P)*T,r[4]=(x*L-s*q-c*I)*T,r[5]=(n*q-i*L+t*I)*T,r[6]=(M*E-m*N-y*A)*T,r[7]=(h*N-l*E+f*A)*T,r[8]=(s*Y-v*L+c*S)*T,r[9]=(a*L-n*Y-t*S)*T,r[10]=(m*w-g*E+y*R)*T,r[11]=(p*E-h*w-f*R)*T,r[12]=(v*I-s*_-x*S)*T,r[13]=(n*_-a*I+i*S)*T,r[14]=(g*A-m*P-M*R)*T,r[15]=(h*P-p*A+l*R)*T,r):null}function de(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=e[4],v=e[5],x=e[6],c=e[7],h=e[8],p=e[9],l=e[10],f=e[11],m=e[12],g=e[13],M=e[14],y=e[15];return r[0]=v*(l*y-f*M)-p*(x*y-c*M)+g*(x*f-c*l),r[1]=-(a*(l*y-f*M)-p*(i*y-t*M)+g*(i*f-t*l)),r[2]=a*(x*y-c*M)-v*(i*y-t*M)+g*(i*c-t*x),r[3]=-(a*(x*f-c*l)-v*(i*f-t*l)+p*(i*c-t*x)),r[4]=-(s*(l*y-f*M)-h*(x*y-c*M)+m*(x*f-c*l)),r[5]=n*(l*y-f*M)-h*(i*y-t*M)+m*(i*f-t*l),r[6]=-(n*(x*y-c*M)-s*(i*y-t*M)+m*(i*c-t*x)),r[7]=n*(x*f-c*l)-s*(i*f-t*l)+h*(i*c-t*x),r[8]=s*(p*y-f*g)-h*(v*y-c*g)+m*(v*f-c*p),r[9]=-(n*(p*y-f*g)-h*(a*y-t*g)+m*(a*f-t*p)),r[10]=n*(v*y-c*g)-s*(a*y-t*g)+m*(a*c-t*v),r[11]=-(n*(v*f-c*p)-s*(a*f-t*p)+h*(a*c-t*v)),r[12]=-(s*(p*M-l*g)-h*(v*M-x*g)+m*(v*l-x*p)),r[13]=n*(p*M-l*g)-h*(a*M-i*g)+m*(a*l-i*p),r[14]=-(n*(v*M-x*g)-s*(a*M-i*g)+m*(a*x-i*v)),r[15]=n*(v*l-x*p)-s*(a*l-i*p)+h*(a*x-i*v),r}function oe(r){var e=r[0],n=r[1],a=r[2],i=r[3],t=r[4],s=r[5],v=r[6],x=r[7],c=r[8],h=r[9],p=r[10],l=r[11],f=r[12],m=r[13],g=r[14],M=r[15],y=e*s-n*t,R=e*v-a*t,A=e*x-i*t,E=n*v-a*s,P=n*x-i*s,w=a*x-i*v,N=c*m-h*f,S=c*g-p*f,I=c*M-l*f,L=h*g-p*m,_=h*M-l*m,Y=p*M-l*g;return y*Y-R*_+A*L+E*I-P*S+w*N}function $r(r,e,n){var a=e[0],i=e[1],t=e[2],s=e[3],v=e[4],x=e[5],c=e[6],h=e[7],p=e[8],l=e[9],f=e[10],m=e[11],g=e[12],M=e[13],y=e[14],R=e[15],A=n[0],E=n[1],P=n[2],w=n[3];return r[0]=A*a+E*v+P*p+w*g,r[1]=A*i+E*x+P*l+w*M,r[2]=A*t+E*c+P*f+w*y,r[3]=A*s+E*h+P*m+w*R,A=n[4],E=n[5],P=n[6],w=n[7],r[4]=A*a+E*v+P*p+w*g,r[5]=A*i+E*x+P*l+w*M,r[6]=A*t+E*c+P*f+w*y,r[7]=A*s+E*h+P*m+w*R,A=n[8],E=n[9],P=n[10],w=n[11],r[8]=A*a+E*v+P*p+w*g,r[9]=A*i+E*x+P*l+w*M,r[10]=A*t+E*c+P*f+w*y,r[11]=A*s+E*h+P*m+w*R,A=n[12],E=n[13],P=n[14],w=n[15],r[12]=A*a+E*v+P*p+w*g,r[13]=A*i+E*x+P*l+w*M,r[14]=A*t+E*c+P*f+w*y,r[15]=A*s+E*h+P*m+w*R,r}function Ae(r,e,n){var a=n[0],i=n[1],t=n[2],s,v,x,c,h,p,l,f,m,g,M,y;return e===r?(r[12]=e[0]*a+e[4]*i+e[8]*t+e[12],r[13]=e[1]*a+e[5]*i+e[9]*t+e[13],r[14]=e[2]*a+e[6]*i+e[10]*t+e[14],r[15]=e[3]*a+e[7]*i+e[11]*t+e[15]):(s=e[0],v=e[1],x=e[2],c=e[3],h=e[4],p=e[5],l=e[6],f=e[7],m=e[8],g=e[9],M=e[10],y=e[11],r[0]=s,r[1]=v,r[2]=x,r[3]=c,r[4]=h,r[5]=p,r[6]=l,r[7]=f,r[8]=m,r[9]=g,r[10]=M,r[11]=y,r[12]=s*a+h*i+m*t+e[12],r[13]=v*a+p*i+g*t+e[13],r[14]=x*a+l*i+M*t+e[14],r[15]=c*a+f*i+y*t+e[15]),r}function Ee(r,e,n){var a=n[0],i=n[1],t=n[2];return r[0]=e[0]*a,r[1]=e[1]*a,r[2]=e[2]*a,r[3]=e[3]*a,r[4]=e[4]*i,r[5]=e[5]*i,r[6]=e[6]*i,r[7]=e[7]*i,r[8]=e[8]*t,r[9]=e[9]*t,r[10]=e[10]*t,r[11]=e[11]*t,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function Re(r,e,n,a){var i=a[0],t=a[1],s=a[2],v=Math.hypot(i,t,s),x,c,h,p,l,f,m,g,M,y,R,A,E,P,w,N,S,I,L,_,Y,q,T,C;return v<o?null:(v=1/v,i*=v,t*=v,s*=v,x=Math.sin(n),c=Math.cos(n),h=1-c,p=e[0],l=e[1],f=e[2],m=e[3],g=e[4],M=e[5],y=e[6],R=e[7],A=e[8],E=e[9],P=e[10],w=e[11],N=i*i*h+c,S=t*i*h+s*x,I=s*i*h-t*x,L=i*t*h-s*x,_=t*t*h+c,Y=s*t*h+i*x,q=i*s*h+t*x,T=t*s*h-i*x,C=s*s*h+c,r[0]=p*N+g*S+A*I,r[1]=l*N+M*S+E*I,r[2]=f*N+y*S+P*I,r[3]=m*N+R*S+w*I,r[4]=p*L+g*_+A*Y,r[5]=l*L+M*_+E*Y,r[6]=f*L+y*_+P*Y,r[7]=m*L+R*_+w*Y,r[8]=p*q+g*T+A*C,r[9]=l*q+M*T+E*C,r[10]=f*q+y*T+P*C,r[11]=m*q+R*T+w*C,e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r)}function we(r,e,n){var a=Math.sin(n),i=Math.cos(n),t=e[4],s=e[5],v=e[6],x=e[7],c=e[8],h=e[9],p=e[10],l=e[11];return e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[4]=t*i+c*a,r[5]=s*i+h*a,r[6]=v*i+p*a,r[7]=x*i+l*a,r[8]=c*i-t*a,r[9]=h*i-s*a,r[10]=p*i-v*a,r[11]=l*i-x*a,r}function Pe(r,e,n){var a=Math.sin(n),i=Math.cos(n),t=e[0],s=e[1],v=e[2],x=e[3],c=e[8],h=e[9],p=e[10],l=e[11];return e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=t*i-c*a,r[1]=s*i-h*a,r[2]=v*i-p*a,r[3]=x*i-l*a,r[8]=t*a+c*i,r[9]=s*a+h*i,r[10]=v*a+p*i,r[11]=x*a+l*i,r}function ze(r,e,n){var a=Math.sin(n),i=Math.cos(n),t=e[0],s=e[1],v=e[2],x=e[3],c=e[4],h=e[5],p=e[6],l=e[7];return e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=t*i+c*a,r[1]=s*i+h*a,r[2]=v*i+p*a,r[3]=x*i+l*a,r[4]=c*i-t*a,r[5]=h*i-s*a,r[6]=p*i-v*a,r[7]=l*i-x*a,r}function Te(r,e){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r}function Le(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=e[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Se(r,e,n){var a=n[0],i=n[1],t=n[2],s=Math.hypot(a,i,t),v,x,c;return s<o?null:(s=1/s,a*=s,i*=s,t*=s,v=Math.sin(e),x=Math.cos(e),c=1-x,r[0]=a*a*c+x,r[1]=i*a*c+t*v,r[2]=t*a*c-i*v,r[3]=0,r[4]=a*i*c-t*v,r[5]=i*i*c+x,r[6]=t*i*c+a*v,r[7]=0,r[8]=a*t*c+i*v,r[9]=i*t*c-a*v,r[10]=t*t*c+x,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r)}function Ie(r,e){var n=Math.sin(e),a=Math.cos(e);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=a,r[6]=n,r[7]=0,r[8]=0,r[9]=-n,r[10]=a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Ye(r,e){var n=Math.sin(e),a=Math.cos(e);return r[0]=a,r[1]=0,r[2]=-n,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=n,r[9]=0,r[10]=a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Ne(r,e){var n=Math.sin(e),a=Math.cos(e);return r[0]=a,r[1]=n,r[2]=0,r[3]=0,r[4]=-n,r[5]=a,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function ur(r,e,n){var a=e[0],i=e[1],t=e[2],s=e[3],v=a+a,x=i+i,c=t+t,h=a*v,p=a*x,l=a*c,f=i*x,m=i*c,g=t*c,M=s*v,y=s*x,R=s*c;return r[0]=1-(f+g),r[1]=p+R,r[2]=l-y,r[3]=0,r[4]=p-R,r[5]=1-(h+g),r[6]=m+M,r[7]=0,r[8]=l+y,r[9]=m-M,r[10]=1-(h+f),r[11]=0,r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=1,r}function Oe(r,e){var n=new z(3),a=-e[0],i=-e[1],t=-e[2],s=e[3],v=e[4],x=e[5],c=e[6],h=e[7],p=a*a+i*i+t*t+s*s;return p>0?(n[0]=(v*s+h*a+x*t-c*i)*2/p,n[1]=(x*s+h*i+c*a-v*t)*2/p,n[2]=(c*s+h*t+v*i-x*a)*2/p):(n[0]=(v*s+h*a+x*t-c*i)*2,n[1]=(x*s+h*i+c*a-v*t)*2,n[2]=(c*s+h*t+v*i-x*a)*2),ur(r,e,n),r}function Er(r,e){return r[0]=e[12],r[1]=e[13],r[2]=e[14],r}function r1(r,e){var n=e[0],a=e[1],i=e[2],t=e[4],s=e[5],v=e[6],x=e[8],c=e[9],h=e[10];return r[0]=Math.hypot(n,a,i),r[1]=Math.hypot(t,s,v),r[2]=Math.hypot(x,c,h),r}function Rr(r,e){var n=new z(3);r1(n,e);var a=1/n[0],i=1/n[1],t=1/n[2],s=e[0]*a,v=e[1]*i,x=e[2]*t,c=e[4]*a,h=e[5]*i,p=e[6]*t,l=e[8]*a,f=e[9]*i,m=e[10]*t,g=s+h+m,M=0;return g>0?(M=Math.sqrt(g+1)*2,r[3]=.25*M,r[0]=(p-f)/M,r[1]=(l-x)/M,r[2]=(v-c)/M):s>h&&s>m?(M=Math.sqrt(1+s-h-m)*2,r[3]=(p-f)/M,r[0]=.25*M,r[1]=(v+c)/M,r[2]=(l+x)/M):h>m?(M=Math.sqrt(1+h-s-m)*2,r[3]=(l-x)/M,r[0]=(v+c)/M,r[1]=.25*M,r[2]=(p+f)/M):(M=Math.sqrt(1+m-s-h)*2,r[3]=(v-c)/M,r[0]=(l+x)/M,r[1]=(p+f)/M,r[2]=.25*M),r}function _e(r,e,n,a){var i=e[0],t=e[1],s=e[2],v=e[3],x=i+i,c=t+t,h=s+s,p=i*x,l=i*c,f=i*h,m=t*c,g=t*h,M=s*h,y=v*x,R=v*c,A=v*h,E=a[0],P=a[1],w=a[2];return r[0]=(1-(m+M))*E,r[1]=(l+A)*E,r[2]=(f-R)*E,r[3]=0,r[4]=(l-A)*P,r[5]=(1-(p+M))*P,r[6]=(g+y)*P,r[7]=0,r[8]=(f+R)*w,r[9]=(g-y)*w,r[10]=(1-(p+m))*w,r[11]=0,r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=1,r}function qe(r,e,n,a,i){var t=e[0],s=e[1],v=e[2],x=e[3],c=t+t,h=s+s,p=v+v,l=t*c,f=t*h,m=t*p,g=s*h,M=s*p,y=v*p,R=x*c,A=x*h,E=x*p,P=a[0],w=a[1],N=a[2],S=i[0],I=i[1],L=i[2],_=(1-(g+y))*P,Y=(f+E)*P,q=(m-A)*P,T=(f-E)*w,C=(1-(l+y))*w,W=(M+R)*w,Z=(m+A)*N,Br=(M-R)*N,jr=(1-(l+g))*N;return r[0]=_,r[1]=Y,r[2]=q,r[3]=0,r[4]=T,r[5]=C,r[6]=W,r[7]=0,r[8]=Z,r[9]=Br,r[10]=jr,r[11]=0,r[12]=n[0]+S-(_*S+T*I+Z*L),r[13]=n[1]+I-(Y*S+C*I+Br*L),r[14]=n[2]+L-(q*S+W*I+jr*L),r[15]=1,r}function De(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=n+n,v=a+a,x=i+i,c=n*s,h=a*s,p=a*v,l=i*s,f=i*v,m=i*x,g=t*s,M=t*v,y=t*x;return r[0]=1-p-m,r[1]=h+y,r[2]=l-M,r[3]=0,r[4]=h-y,r[5]=1-c-m,r[6]=f+g,r[7]=0,r[8]=l+M,r[9]=f-g,r[10]=1-c-p,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Fe(r,e,n,a,i,t,s){var v=1/(n-e),x=1/(i-a),c=1/(t-s);return r[0]=t*2*v,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=t*2*x,r[6]=0,r[7]=0,r[8]=(n+e)*v,r[9]=(i+a)*x,r[10]=(s+t)*c,r[11]=-1,r[12]=0,r[13]=0,r[14]=s*t*2*c,r[15]=0,r}function e1(r,e,n,a,i){var t=1/Math.tan(e/2),s;return r[0]=t/n,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=t,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,i!=null&&i!==1/0?(s=1/(a-i),r[10]=(i+a)*s,r[14]=2*i*a*s):(r[10]=-1,r[14]=-2*a),r}var Ve=e1;function be(r,e,n,a,i){var t=1/Math.tan(e/2),s;return r[0]=t/n,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=t,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,i!=null&&i!==1/0?(s=1/(a-i),r[10]=i*s,r[14]=i*a*s):(r[10]=-1,r[14]=-a),r}function Ce(r,e,n,a){var i=Math.tan(e.upDegrees*Math.PI/180),t=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),v=Math.tan(e.rightDegrees*Math.PI/180),x=2/(s+v),c=2/(i+t);return r[0]=x,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=c,r[6]=0,r[7]=0,r[8]=-((s-v)*x*.5),r[9]=(i-t)*c*.5,r[10]=a/(n-a),r[11]=-1,r[12]=0,r[13]=0,r[14]=a*n/(n-a),r[15]=0,r}function n1(r,e,n,a,i,t,s){var v=1/(e-n),x=1/(a-i),c=1/(t-s);return r[0]=-2*v,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*x,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*c,r[11]=0,r[12]=(e+n)*v,r[13]=(i+a)*x,r[14]=(s+t)*c,r[15]=1,r}var Ue=n1;function Xe(r,e,n,a,i,t,s){var v=1/(e-n),x=1/(a-i),c=1/(t-s);return r[0]=-2*v,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*x,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=c,r[11]=0,r[12]=(e+n)*v,r[13]=(i+a)*x,r[14]=t*c,r[15]=1,r}function Be(r,e,n,a){var i,t,s,v,x,c,h,p,l,f,m=e[0],g=e[1],M=e[2],y=a[0],R=a[1],A=a[2],E=n[0],P=n[1],w=n[2];return Math.abs(m-E)<o&&Math.abs(g-P)<o&&Math.abs(M-w)<o?Kr(r):(h=m-E,p=g-P,l=M-w,f=1/Math.hypot(h,p,l),h*=f,p*=f,l*=f,i=R*l-A*p,t=A*h-y*l,s=y*p-R*h,f=Math.hypot(i,t,s),f?(f=1/f,i*=f,t*=f,s*=f):(i=0,t=0,s=0),v=p*s-l*t,x=l*i-h*s,c=h*t-p*i,f=Math.hypot(v,x,c),f?(f=1/f,v*=f,x*=f,c*=f):(v=0,x=0,c=0),r[0]=i,r[1]=v,r[2]=h,r[3]=0,r[4]=t,r[5]=x,r[6]=p,r[7]=0,r[8]=s,r[9]=c,r[10]=l,r[11]=0,r[12]=-(i*m+t*g+s*M),r[13]=-(v*m+x*g+c*M),r[14]=-(h*m+p*g+l*M),r[15]=1,r)}function je(r,e,n,a){var i=e[0],t=e[1],s=e[2],v=a[0],x=a[1],c=a[2],h=i-n[0],p=t-n[1],l=s-n[2],f=h*h+p*p+l*l;f>0&&(f=1/Math.sqrt(f),h*=f,p*=f,l*=f);var m=x*l-c*p,g=c*h-v*l,M=v*p-x*h;return f=m*m+g*g+M*M,f>0&&(f=1/Math.sqrt(f),m*=f,g*=f,M*=f),r[0]=m,r[1]=g,r[2]=M,r[3]=0,r[4]=p*M-l*g,r[5]=l*m-h*M,r[6]=h*g-p*m,r[7]=0,r[8]=h,r[9]=p,r[10]=l,r[11]=0,r[12]=i,r[13]=t,r[14]=s,r[15]=1,r}function Ge(r){return"mat4("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+", "+r[9]+", "+r[10]+", "+r[11]+", "+r[12]+", "+r[13]+", "+r[14]+", "+r[15]+")"}function He(r){return Math.hypot(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])}function We(r,e,n){return r[0]=e[0]+n[0],r[1]=e[1]+n[1],r[2]=e[2]+n[2],r[3]=e[3]+n[3],r[4]=e[4]+n[4],r[5]=e[5]+n[5],r[6]=e[6]+n[6],r[7]=e[7]+n[7],r[8]=e[8]+n[8],r[9]=e[9]+n[9],r[10]=e[10]+n[10],r[11]=e[11]+n[11],r[12]=e[12]+n[12],r[13]=e[13]+n[13],r[14]=e[14]+n[14],r[15]=e[15]+n[15],r}function a1(r,e,n){return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],r[3]=e[3]-n[3],r[4]=e[4]-n[4],r[5]=e[5]-n[5],r[6]=e[6]-n[6],r[7]=e[7]-n[7],r[8]=e[8]-n[8],r[9]=e[9]-n[9],r[10]=e[10]-n[10],r[11]=e[11]-n[11],r[12]=e[12]-n[12],r[13]=e[13]-n[13],r[14]=e[14]-n[14],r[15]=e[15]-n[15],r}function Ze(r,e,n){return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r[4]=e[4]*n,r[5]=e[5]*n,r[6]=e[6]*n,r[7]=e[7]*n,r[8]=e[8]*n,r[9]=e[9]*n,r[10]=e[10]*n,r[11]=e[11]*n,r[12]=e[12]*n,r[13]=e[13]*n,r[14]=e[14]*n,r[15]=e[15]*n,r}function Qe(r,e,n,a){return r[0]=e[0]+n[0]*a,r[1]=e[1]+n[1]*a,r[2]=e[2]+n[2]*a,r[3]=e[3]+n[3]*a,r[4]=e[4]+n[4]*a,r[5]=e[5]+n[5]*a,r[6]=e[6]+n[6]*a,r[7]=e[7]+n[7]*a,r[8]=e[8]+n[8]*a,r[9]=e[9]+n[9]*a,r[10]=e[10]+n[10]*a,r[11]=e[11]+n[11]*a,r[12]=e[12]+n[12]*a,r[13]=e[13]+n[13]*a,r[14]=e[14]+n[14]*a,r[15]=e[15]+n[15]*a,r}function ke(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]&&r[9]===e[9]&&r[10]===e[10]&&r[11]===e[11]&&r[12]===e[12]&&r[13]===e[13]&&r[14]===e[14]&&r[15]===e[15]}function Je(r,e){var n=r[0],a=r[1],i=r[2],t=r[3],s=r[4],v=r[5],x=r[6],c=r[7],h=r[8],p=r[9],l=r[10],f=r[11],m=r[12],g=r[13],M=r[14],y=r[15],R=e[0],A=e[1],E=e[2],P=e[3],w=e[4],N=e[5],S=e[6],I=e[7],L=e[8],_=e[9],Y=e[10],q=e[11],T=e[12],C=e[13],W=e[14],Z=e[15];return Math.abs(n-R)<=o*Math.max(1,Math.abs(n),Math.abs(R))&&Math.abs(a-A)<=o*Math.max(1,Math.abs(a),Math.abs(A))&&Math.abs(i-E)<=o*Math.max(1,Math.abs(i),Math.abs(E))&&Math.abs(t-P)<=o*Math.max(1,Math.abs(t),Math.abs(P))&&Math.abs(s-w)<=o*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(v-N)<=o*Math.max(1,Math.abs(v),Math.abs(N))&&Math.abs(x-S)<=o*Math.max(1,Math.abs(x),Math.abs(S))&&Math.abs(c-I)<=o*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(h-L)<=o*Math.max(1,Math.abs(h),Math.abs(L))&&Math.abs(p-_)<=o*Math.max(1,Math.abs(p),Math.abs(_))&&Math.abs(l-Y)<=o*Math.max(1,Math.abs(l),Math.abs(Y))&&Math.abs(f-q)<=o*Math.max(1,Math.abs(f),Math.abs(q))&&Math.abs(m-T)<=o*Math.max(1,Math.abs(m),Math.abs(T))&&Math.abs(g-C)<=o*Math.max(1,Math.abs(g),Math.abs(C))&&Math.abs(M-W)<=o*Math.max(1,Math.abs(M),Math.abs(W))&&Math.abs(y-Z)<=o*Math.max(1,Math.abs(y),Math.abs(Z))}var Ke=$r,$e=a1;var G={};b(G,{add:()=>ga,calculateW:()=>sa,clone:()=>la,conjugate:()=>ha,copy:()=>tr,create:()=>k,dot:()=>sr,equals:()=>Ra,exactEquals:()=>Ea,exp:()=>o1,fromEuler:()=>pa,fromMat3:()=>E1,fromValues:()=>Ma,getAngle:()=>ta,getAxisAngle:()=>ia,identity:()=>aa,invert:()=>ca,len:()=>oa,length:()=>vr,lerp:()=>da,ln:()=>A1,mul:()=>ya,multiply:()=>d1,normalize:()=>Cr,pow:()=>va,random:()=>xa,rotateX:()=>Fr,rotateY:()=>Vr,rotateZ:()=>br,rotationTo:()=>wa,scale:()=>R1,set:()=>ma,setAxes:()=>za,setAxisAngle:()=>y1,slerp:()=>ir,sqlerp:()=>Pa,sqrLen:()=>Aa,squaredLength:()=>xr,str:()=>fa});var O={};b(O,{add:()=>nn,angle:()=>wn,bezier:()=>mn,ceil:()=>an,clone:()=>ue,copy:()=>rn,create:()=>$,cross:()=>Q,dist:()=>Nn,distance:()=>x1,div:()=>Yn,divide:()=>v1,dot:()=>rr,equals:()=>Ln,exactEquals:()=>Tn,floor:()=>tn,forEach:()=>qn,fromValues:()=>u,hermite:()=>Mn,inverse:()=>fn,len:()=>Pr,length:()=>i1,lerp:()=>ln,max:()=>vn,min:()=>sn,mul:()=>In,multiply:()=>s1,negate:()=>pn,normalize:()=>wr,random:()=>gn,rotateX:()=>An,rotateY:()=>En,rotateZ:()=>Rn,round:()=>xn,scale:()=>cn,scaleAndAdd:()=>hn,set:()=>en,sqrDist:()=>On,sqrLen:()=>_n,squaredDistance:()=>c1,squaredLength:()=>h1,str:()=>zn,sub:()=>Sn,subtract:()=>t1,transformMat3:()=>dn,transformMat4:()=>yn,transformQuat:()=>on,zero:()=>Pn});function $(){var r=new z(3);return z!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function ue(r){var e=new z(3);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}function i1(r){var e=r[0],n=r[1],a=r[2];return Math.hypot(e,n,a)}function u(r,e,n){var a=new z(3);return a[0]=r,a[1]=e,a[2]=n,a}function rn(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r}function en(r,e,n,a){return r[0]=e,r[1]=n,r[2]=a,r}function nn(r,e,n){return r[0]=e[0]+n[0],r[1]=e[1]+n[1],r[2]=e[2]+n[2],r}function t1(r,e,n){return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],r}function s1(r,e,n){return r[0]=e[0]*n[0],r[1]=e[1]*n[1],r[2]=e[2]*n[2],r}function v1(r,e,n){return r[0]=e[0]/n[0],r[1]=e[1]/n[1],r[2]=e[2]/n[2],r}function an(r,e){return r[0]=Math.ceil(e[0]),r[1]=Math.ceil(e[1]),r[2]=Math.ceil(e[2]),r}function tn(r,e){return r[0]=Math.floor(e[0]),r[1]=Math.floor(e[1]),r[2]=Math.floor(e[2]),r}function sn(r,e,n){return r[0]=Math.min(e[0],n[0]),r[1]=Math.min(e[1],n[1]),r[2]=Math.min(e[2],n[2]),r}function vn(r,e,n){return r[0]=Math.max(e[0],n[0]),r[1]=Math.max(e[1],n[1]),r[2]=Math.max(e[2],n[2]),r}function xn(r,e){return r[0]=Math.round(e[0]),r[1]=Math.round(e[1]),r[2]=Math.round(e[2]),r}function cn(r,e,n){return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r}function hn(r,e,n,a){return r[0]=e[0]+n[0]*a,r[1]=e[1]+n[1]*a,r[2]=e[2]+n[2]*a,r}function x1(r,e){var n=e[0]-r[0],a=e[1]-r[1],i=e[2]-r[2];return Math.hypot(n,a,i)}function c1(r,e){var n=e[0]-r[0],a=e[1]-r[1],i=e[2]-r[2];return n*n+a*a+i*i}function h1(r){var e=r[0],n=r[1],a=r[2];return e*e+n*n+a*a}function pn(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r}function fn(r,e){return r[0]=1/e[0],r[1]=1/e[1],r[2]=1/e[2],r}function wr(r,e){var n=e[0],a=e[1],i=e[2],t=n*n+a*a+i*i;return t>0&&(t=1/Math.sqrt(t)),r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r}function rr(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]}function Q(r,e,n){var a=e[0],i=e[1],t=e[2],s=n[0],v=n[1],x=n[2];return r[0]=i*x-t*v,r[1]=t*s-a*x,r[2]=a*v-i*s,r}function ln(r,e,n,a){var i=e[0],t=e[1],s=e[2];return r[0]=i+a*(n[0]-i),r[1]=t+a*(n[1]-t),r[2]=s+a*(n[2]-s),r}function Mn(r,e,n,a,i,t){var s=t*t,v=s*(2*t-3)+1,x=s*(t-2)+t,c=s*(t-1),h=s*(3-2*t);return r[0]=e[0]*v+n[0]*x+a[0]*c+i[0]*h,r[1]=e[1]*v+n[1]*x+a[1]*c+i[1]*h,r[2]=e[2]*v+n[2]*x+a[2]*c+i[2]*h,r}function mn(r,e,n,a,i,t){var s=1-t,v=s*s,x=t*t,c=v*s,h=3*t*v,p=3*x*s,l=x*t;return r[0]=e[0]*c+n[0]*h+a[0]*p+i[0]*l,r[1]=e[1]*c+n[1]*h+a[1]*p+i[1]*l,r[2]=e[2]*c+n[2]*h+a[2]*p+i[2]*l,r}function gn(r,e){e=e||1;var n=F()*2*Math.PI,a=F()*2-1,i=Math.sqrt(1-a*a)*e;return r[0]=Math.cos(n)*i,r[1]=Math.sin(n)*i,r[2]=a*e,r}function yn(r,e,n){var a=e[0],i=e[1],t=e[2],s=n[3]*a+n[7]*i+n[11]*t+n[15];return s=s||1,r[0]=(n[0]*a+n[4]*i+n[8]*t+n[12])/s,r[1]=(n[1]*a+n[5]*i+n[9]*t+n[13])/s,r[2]=(n[2]*a+n[6]*i+n[10]*t+n[14])/s,r}function dn(r,e,n){var a=e[0],i=e[1],t=e[2];return r[0]=a*n[0]+i*n[3]+t*n[6],r[1]=a*n[1]+i*n[4]+t*n[7],r[2]=a*n[2]+i*n[5]+t*n[8],r}function on(r,e,n){var a=n[0],i=n[1],t=n[2],s=n[3],v=e[0],x=e[1],c=e[2],h=i*c-t*x,p=t*v-a*c,l=a*x-i*v,f=i*l-t*p,m=t*h-a*l,g=a*p-i*h,M=s*2;return h*=M,p*=M,l*=M,f*=2,m*=2,g*=2,r[0]=v+h+f,r[1]=x+p+m,r[2]=c+l+g,r}function An(r,e,n,a){var i=[],t=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],t[0]=i[0],t[1]=i[1]*Math.cos(a)-i[2]*Math.sin(a),t[2]=i[1]*Math.sin(a)+i[2]*Math.cos(a),r[0]=t[0]+n[0],r[1]=t[1]+n[1],r[2]=t[2]+n[2],r}function En(r,e,n,a){var i=[],t=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],t[0]=i[2]*Math.sin(a)+i[0]*Math.cos(a),t[1]=i[1],t[2]=i[2]*Math.cos(a)-i[0]*Math.sin(a),r[0]=t[0]+n[0],r[1]=t[1]+n[1],r[2]=t[2]+n[2],r}function Rn(r,e,n,a){var i=[],t=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],t[0]=i[0]*Math.cos(a)-i[1]*Math.sin(a),t[1]=i[0]*Math.sin(a)+i[1]*Math.cos(a),t[2]=i[2],r[0]=t[0]+n[0],r[1]=t[1]+n[1],r[2]=t[2]+n[2],r}function wn(r,e){var n=r[0],a=r[1],i=r[2],t=e[0],s=e[1],v=e[2],x=Math.sqrt(n*n+a*a+i*i),c=Math.sqrt(t*t+s*s+v*v),h=x*c,p=h&&rr(r,e)/h;return Math.acos(Math.min(Math.max(p,-1),1))}function Pn(r){return r[0]=0,r[1]=0,r[2]=0,r}function zn(r){return"vec3("+r[0]+", "+r[1]+", "+r[2]+")"}function Tn(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]}function Ln(r,e){var n=r[0],a=r[1],i=r[2],t=e[0],s=e[1],v=e[2];return Math.abs(n-t)<=o*Math.max(1,Math.abs(n),Math.abs(t))&&Math.abs(a-s)<=o*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(i-v)<=o*Math.max(1,Math.abs(i),Math.abs(v))}var Sn=t1,In=s1,Yn=v1,Nn=x1,On=c1,Pr=i1,_n=h1,qn=function(){var r=$();return function(e,n,a,i,t,s){var v,x;for(n||(n=3),a||(a=0),i?x=Math.min(i*n+a,e.length):x=e.length,v=a;v<x;v+=n)r[0]=e[v],r[1]=e[v+1],r[2]=e[v+2],t(r,r,s),e[v]=r[0],e[v+1]=r[1],e[v+2]=r[2];return e}}();var ar={};b(ar,{add:()=>Ir,ceil:()=>Dn,clone:()=>zr,copy:()=>Lr,create:()=>p1,cross:()=>jn,dist:()=>$n,distance:()=>m1,div:()=>Kn,divide:()=>M1,dot:()=>Or,equals:()=>Dr,exactEquals:()=>qr,floor:()=>Fn,forEach:()=>na,fromValues:()=>Tr,inverse:()=>Bn,len:()=>ra,length:()=>er,lerp:()=>_r,max:()=>bn,min:()=>Vn,mul:()=>Jn,multiply:()=>l1,negate:()=>Xn,normalize:()=>Nr,random:()=>Gn,round:()=>Cn,scale:()=>Yr,scaleAndAdd:()=>Un,set:()=>Sr,sqrDist:()=>un,sqrLen:()=>ea,squaredDistance:()=>g1,squaredLength:()=>nr,str:()=>Qn,sub:()=>kn,subtract:()=>f1,transformMat4:()=>Hn,transformQuat:()=>Wn,zero:()=>Zn});function p1(){var r=new z(4);return z!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r}function zr(r){var e=new z(4);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}function Tr(r,e,n,a){var i=new z(4);return i[0]=r,i[1]=e,i[2]=n,i[3]=a,i}function Lr(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r}function Sr(r,e,n,a,i){return r[0]=e,r[1]=n,r[2]=a,r[3]=i,r}function Ir(r,e,n){return r[0]=e[0]+n[0],r[1]=e[1]+n[1],r[2]=e[2]+n[2],r[3]=e[3]+n[3],r}function f1(r,e,n){return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],r[3]=e[3]-n[3],r}function l1(r,e,n){return r[0]=e[0]*n[0],r[1]=e[1]*n[1],r[2]=e[2]*n[2],r[3]=e[3]*n[3],r}function M1(r,e,n){return r[0]=e[0]/n[0],r[1]=e[1]/n[1],r[2]=e[2]/n[2],r[3]=e[3]/n[3],r}function Dn(r,e){return r[0]=Math.ceil(e[0]),r[1]=Math.ceil(e[1]),r[2]=Math.ceil(e[2]),r[3]=Math.ceil(e[3]),r}function Fn(r,e){return r[0]=Math.floor(e[0]),r[1]=Math.floor(e[1]),r[2]=Math.floor(e[2]),r[3]=Math.floor(e[3]),r}function Vn(r,e,n){return r[0]=Math.min(e[0],n[0]),r[1]=Math.min(e[1],n[1]),r[2]=Math.min(e[2],n[2]),r[3]=Math.min(e[3],n[3]),r}function bn(r,e,n){return r[0]=Math.max(e[0],n[0]),r[1]=Math.max(e[1],n[1]),r[2]=Math.max(e[2],n[2]),r[3]=Math.max(e[3],n[3]),r}function Cn(r,e){return r[0]=Math.round(e[0]),r[1]=Math.round(e[1]),r[2]=Math.round(e[2]),r[3]=Math.round(e[3]),r}function Yr(r,e,n){return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r}function Un(r,e,n,a){return r[0]=e[0]+n[0]*a,r[1]=e[1]+n[1]*a,r[2]=e[2]+n[2]*a,r[3]=e[3]+n[3]*a,r}function m1(r,e){var n=e[0]-r[0],a=e[1]-r[1],i=e[2]-r[2],t=e[3]-r[3];return Math.hypot(n,a,i,t)}function g1(r,e){var n=e[0]-r[0],a=e[1]-r[1],i=e[2]-r[2],t=e[3]-r[3];return n*n+a*a+i*i+t*t}function er(r){var e=r[0],n=r[1],a=r[2],i=r[3];return Math.hypot(e,n,a,i)}function nr(r){var e=r[0],n=r[1],a=r[2],i=r[3];return e*e+n*n+a*a+i*i}function Xn(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r[3]=-e[3],r}function Bn(r,e){return r[0]=1/e[0],r[1]=1/e[1],r[2]=1/e[2],r[3]=1/e[3],r}function Nr(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=n*n+a*a+i*i+t*t;return s>0&&(s=1/Math.sqrt(s)),r[0]=n*s,r[1]=a*s,r[2]=i*s,r[3]=t*s,r}function Or(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]+r[3]*e[3]}function jn(r,e,n,a){var i=n[0]*a[1]-n[1]*a[0],t=n[0]*a[2]-n[2]*a[0],s=n[0]*a[3]-n[3]*a[0],v=n[1]*a[2]-n[2]*a[1],x=n[1]*a[3]-n[3]*a[1],c=n[2]*a[3]-n[3]*a[2],h=e[0],p=e[1],l=e[2],f=e[3];return r[0]=p*c-l*x+f*v,r[1]=-(h*c)+l*s-f*t,r[2]=h*x-p*s+f*i,r[3]=-(h*v)+p*t-l*i,r}function _r(r,e,n,a){var i=e[0],t=e[1],s=e[2],v=e[3];return r[0]=i+a*(n[0]-i),r[1]=t+a*(n[1]-t),r[2]=s+a*(n[2]-s),r[3]=v+a*(n[3]-v),r}function Gn(r,e){e=e||1;var n,a,i,t,s,v;do n=F()*2-1,a=F()*2-1,s=n*n+a*a;while(s>=1);do i=F()*2-1,t=F()*2-1,v=i*i+t*t;while(v>=1);var x=Math.sqrt((1-s)/v);return r[0]=e*n,r[1]=e*a,r[2]=e*i*x,r[3]=e*t*x,r}function Hn(r,e,n){var a=e[0],i=e[1],t=e[2],s=e[3];return r[0]=n[0]*a+n[4]*i+n[8]*t+n[12]*s,r[1]=n[1]*a+n[5]*i+n[9]*t+n[13]*s,r[2]=n[2]*a+n[6]*i+n[10]*t+n[14]*s,r[3]=n[3]*a+n[7]*i+n[11]*t+n[15]*s,r}function Wn(r,e,n){var a=e[0],i=e[1],t=e[2],s=n[0],v=n[1],x=n[2],c=n[3],h=c*a+v*t-x*i,p=c*i+x*a-s*t,l=c*t+s*i-v*a,f=-s*a-v*i-x*t;return r[0]=h*c+f*-s+p*-x-l*-v,r[1]=p*c+f*-v+l*-s-h*-x,r[2]=l*c+f*-x+h*-v-p*-s,r[3]=e[3],r}function Zn(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r}function Qn(r){return"vec4("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+")"}function qr(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]}function Dr(r,e){var n=r[0],a=r[1],i=r[2],t=r[3],s=e[0],v=e[1],x=e[2],c=e[3];return Math.abs(n-s)<=o*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(a-v)<=o*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(i-x)<=o*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(t-c)<=o*Math.max(1,Math.abs(t),Math.abs(c))}var kn=f1,Jn=l1,Kn=M1,$n=m1,un=g1,ra=er,ea=nr,na=function(){var r=p1();return function(e,n,a,i,t,s){var v,x;for(n||(n=4),a||(a=0),i?x=Math.min(i*n+a,e.length):x=e.length,v=a;v<x;v+=n)r[0]=e[v],r[1]=e[v+1],r[2]=e[v+2],r[3]=e[v+3],t(r,r,s),e[v]=r[0],e[v+1]=r[1],e[v+2]=r[2],e[v+3]=r[3];return e}}();function k(){var r=new z(4);return z!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function aa(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r}function y1(r,e,n){n=n*.5;var a=Math.sin(n);return r[0]=a*e[0],r[1]=a*e[1],r[2]=a*e[2],r[3]=Math.cos(n),r}function ia(r,e){var n=Math.acos(e[3])*2,a=Math.sin(n/2);return a>o?(r[0]=e[0]/a,r[1]=e[1]/a,r[2]=e[2]/a):(r[0]=1,r[1]=0,r[2]=0),n}function ta(r,e){var n=sr(r,e);return Math.acos(2*n*n-1)}function d1(r,e,n){var a=e[0],i=e[1],t=e[2],s=e[3],v=n[0],x=n[1],c=n[2],h=n[3];return r[0]=a*h+s*v+i*c-t*x,r[1]=i*h+s*x+t*v-a*c,r[2]=t*h+s*c+a*x-i*v,r[3]=s*h-a*v-i*x-t*c,r}function Fr(r,e,n){n*=.5;var a=e[0],i=e[1],t=e[2],s=e[3],v=Math.sin(n),x=Math.cos(n);return r[0]=a*x+s*v,r[1]=i*x+t*v,r[2]=t*x-i*v,r[3]=s*x-a*v,r}function Vr(r,e,n){n*=.5;var a=e[0],i=e[1],t=e[2],s=e[3],v=Math.sin(n),x=Math.cos(n);return r[0]=a*x-t*v,r[1]=i*x+s*v,r[2]=t*x+a*v,r[3]=s*x-i*v,r}function br(r,e,n){n*=.5;var a=e[0],i=e[1],t=e[2],s=e[3],v=Math.sin(n),x=Math.cos(n);return r[0]=a*x+i*v,r[1]=i*x-a*v,r[2]=t*x+s*v,r[3]=s*x-t*v,r}function sa(r,e){var n=e[0],a=e[1],i=e[2];return r[0]=n,r[1]=a,r[2]=i,r[3]=Math.sqrt(Math.abs(1-n*n-a*a-i*i)),r}function o1(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=Math.sqrt(n*n+a*a+i*i),v=Math.exp(t),x=s>0?v*Math.sin(s)/s:0;return r[0]=n*x,r[1]=a*x,r[2]=i*x,r[3]=v*Math.cos(s),r}function A1(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=Math.sqrt(n*n+a*a+i*i),v=s>0?Math.atan2(s,t)/s:0;return r[0]=n*v,r[1]=a*v,r[2]=i*v,r[3]=.5*Math.log(n*n+a*a+i*i+t*t),r}function va(r,e,n){return A1(r,e),R1(r,r,n),o1(r,r),r}function ir(r,e,n,a){var i=e[0],t=e[1],s=e[2],v=e[3],x=n[0],c=n[1],h=n[2],p=n[3],l,f,m,g,M;return f=i*x+t*c+s*h+v*p,f<0&&(f=-f,x=-x,c=-c,h=-h,p=-p),1-f>o?(l=Math.acos(f),m=Math.sin(l),g=Math.sin((1-a)*l)/m,M=Math.sin(a*l)/m):(g=1-a,M=a),r[0]=g*i+M*x,r[1]=g*t+M*c,r[2]=g*s+M*h,r[3]=g*v+M*p,r}function xa(r){var e=F(),n=F(),a=F(),i=Math.sqrt(1-e),t=Math.sqrt(e);return r[0]=i*Math.sin(2*Math.PI*n),r[1]=i*Math.cos(2*Math.PI*n),r[2]=t*Math.sin(2*Math.PI*a),r[3]=t*Math.cos(2*Math.PI*a),r}function ca(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=n*n+a*a+i*i+t*t,v=s?1/s:0;return r[0]=-n*v,r[1]=-a*v,r[2]=-i*v,r[3]=t*v,r}function ha(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r[3]=e[3],r}function E1(r,e){var n=e[0]+e[4]+e[8],a;if(n>0)a=Math.sqrt(n+1),r[3]=.5*a,a=.5/a,r[0]=(e[5]-e[7])*a,r[1]=(e[6]-e[2])*a,r[2]=(e[1]-e[3])*a;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);var t=(i+1)%3,s=(i+2)%3;a=Math.sqrt(e[i*3+i]-e[t*3+t]-e[s*3+s]+1),r[i]=.5*a,a=.5/a,r[3]=(e[t*3+s]-e[s*3+t])*a,r[t]=(e[t*3+i]+e[i*3+t])*a,r[s]=(e[s*3+i]+e[i*3+s])*a}return r}function pa(r,e,n,a){var i=.5*Math.PI/180;e*=i,n*=i,a*=i;var t=Math.sin(e),s=Math.cos(e),v=Math.sin(n),x=Math.cos(n),c=Math.sin(a),h=Math.cos(a);return r[0]=t*x*h-s*v*c,r[1]=s*v*h+t*x*c,r[2]=s*x*c-t*v*h,r[3]=s*x*h+t*v*c,r}function fa(r){return"quat("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+")"}var la=zr,Ma=Tr,tr=Lr,ma=Sr,ga=Ir,ya=d1,R1=Yr,sr=Or,da=_r,vr=er,oa=vr,xr=nr,Aa=xr,Cr=Nr,Ea=qr,Ra=Dr,wa=function(){var r=$(),e=u(1,0,0),n=u(0,1,0);return function(a,i,t){var s=rr(i,t);return s<-.999999?(Q(r,e,i),Pr(r)<1e-6&&Q(r,n,i),wr(r,r),y1(a,r,Math.PI),a):s>.999999?(a[0]=0,a[1]=0,a[2]=0,a[3]=1,a):(Q(r,i,t),a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=1+s,Cr(a,a))}}(),Pa=function(){var r=k(),e=k();return function(n,a,i,t,s,v){return ir(r,a,s,v),ir(e,i,t,v),ir(n,r,e,2*v*(1-v)),n}}(),za=function(){var r=Ar();return function(e,n,a,i){return r[0]=a[0],r[3]=a[1],r[6]=a[2],r[1]=i[0],r[4]=i[1],r[7]=i[2],r[2]=-n[0],r[5]=-n[1],r[8]=-n[2],Cr(e,E1(e,r))}}();var Ur={};b(Ur,{add:()=>Za,clone:()=>La,conjugate:()=>$a,copy:()=>P1,create:()=>Ta,dot:()=>T1,equals:()=>ii,exactEquals:()=>ai,fromMat4:()=>Oa,fromRotation:()=>Na,fromRotationTranslation:()=>w1,fromRotationTranslationValues:()=>Ia,fromTranslation:()=>Ya,fromValues:()=>Sa,getDual:()=>Fa,getReal:()=>Da,getTranslation:()=>Ca,identity:()=>_a,invert:()=>Ka,len:()=>ua,length:()=>L1,lerp:()=>Ja,mul:()=>Qa,multiply:()=>z1,normalize:()=>ei,rotateAroundAxis:()=>Wa,rotateByQuatAppend:()=>Ga,rotateByQuatPrepend:()=>Ha,rotateX:()=>Xa,rotateY:()=>Ba,rotateZ:()=>ja,scale:()=>ka,set:()=>qa,setDual:()=>ba,setReal:()=>Va,sqrLen:()=>ri,squaredLength:()=>cr,str:()=>ni,translate:()=>Ua});function Ta(){var r=new z(8);return z!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[4]=0,r[5]=0,r[6]=0,r[7]=0),r[3]=1,r}function La(r){var e=new z(8);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e}function Sa(r,e,n,a,i,t,s,v){var x=new z(8);return x[0]=r,x[1]=e,x[2]=n,x[3]=a,x[4]=i,x[5]=t,x[6]=s,x[7]=v,x}function Ia(r,e,n,a,i,t,s){var v=new z(8);v[0]=r,v[1]=e,v[2]=n,v[3]=a;var x=i*.5,c=t*.5,h=s*.5;return v[4]=x*a+c*n-h*e,v[5]=c*a+h*r-x*n,v[6]=h*a+x*e-c*r,v[7]=-x*r-c*e-h*n,v}function w1(r,e,n){var a=n[0]*.5,i=n[1]*.5,t=n[2]*.5,s=e[0],v=e[1],x=e[2],c=e[3];return r[0]=s,r[1]=v,r[2]=x,r[3]=c,r[4]=a*c+i*x-t*v,r[5]=i*c+t*s-a*x,r[6]=t*c+a*v-i*s,r[7]=-a*s-i*v-t*x,r}function Ya(r,e){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r[4]=e[0]*.5,r[5]=e[1]*.5,r[6]=e[2]*.5,r[7]=0,r}function Na(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=0,r[5]=0,r[6]=0,r[7]=0,r}function Oa(r,e){var n=k();Rr(n,e);var a=new z(3);return Er(a,e),w1(r,n,a),r}function P1(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r}function _a(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r[4]=0,r[5]=0,r[6]=0,r[7]=0,r}function qa(r,e,n,a,i,t,s,v,x){return r[0]=e,r[1]=n,r[2]=a,r[3]=i,r[4]=t,r[5]=s,r[6]=v,r[7]=x,r}var Da=tr;function Fa(r,e){return r[0]=e[4],r[1]=e[5],r[2]=e[6],r[3]=e[7],r}var Va=tr;function ba(r,e){return r[4]=e[0],r[5]=e[1],r[6]=e[2],r[7]=e[3],r}function Ca(r,e){var n=e[4],a=e[5],i=e[6],t=e[7],s=-e[0],v=-e[1],x=-e[2],c=e[3];return r[0]=(n*c+t*s+a*x-i*v)*2,r[1]=(a*c+t*v+i*s-n*x)*2,r[2]=(i*c+t*x+n*v-a*s)*2,r}function Ua(r,e,n){var a=e[0],i=e[1],t=e[2],s=e[3],v=n[0]*.5,x=n[1]*.5,c=n[2]*.5,h=e[4],p=e[5],l=e[6],f=e[7];return r[0]=a,r[1]=i,r[2]=t,r[3]=s,r[4]=s*v+i*c-t*x+h,r[5]=s*x+t*v-a*c+p,r[6]=s*c+a*x-i*v+l,r[7]=-a*v-i*x-t*c+f,r}function Xa(r,e,n){var a=-e[0],i=-e[1],t=-e[2],s=e[3],v=e[4],x=e[5],c=e[6],h=e[7],p=v*s+h*a+x*t-c*i,l=x*s+h*i+c*a-v*t,f=c*s+h*t+v*i-x*a,m=h*s-v*a-x*i-c*t;return Fr(r,e,n),a=r[0],i=r[1],t=r[2],s=r[3],r[4]=p*s+m*a+l*t-f*i,r[5]=l*s+m*i+f*a-p*t,r[6]=f*s+m*t+p*i-l*a,r[7]=m*s-p*a-l*i-f*t,r}function Ba(r,e,n){var a=-e[0],i=-e[1],t=-e[2],s=e[3],v=e[4],x=e[5],c=e[6],h=e[7],p=v*s+h*a+x*t-c*i,l=x*s+h*i+c*a-v*t,f=c*s+h*t+v*i-x*a,m=h*s-v*a-x*i-c*t;return Vr(r,e,n),a=r[0],i=r[1],t=r[2],s=r[3],r[4]=p*s+m*a+l*t-f*i,r[5]=l*s+m*i+f*a-p*t,r[6]=f*s+m*t+p*i-l*a,r[7]=m*s-p*a-l*i-f*t,r}function ja(r,e,n){var a=-e[0],i=-e[1],t=-e[2],s=e[3],v=e[4],x=e[5],c=e[6],h=e[7],p=v*s+h*a+x*t-c*i,l=x*s+h*i+c*a-v*t,f=c*s+h*t+v*i-x*a,m=h*s-v*a-x*i-c*t;return br(r,e,n),a=r[0],i=r[1],t=r[2],s=r[3],r[4]=p*s+m*a+l*t-f*i,r[5]=l*s+m*i+f*a-p*t,r[6]=f*s+m*t+p*i-l*a,r[7]=m*s-p*a-l*i-f*t,r}function Ga(r,e,n){var a=n[0],i=n[1],t=n[2],s=n[3],v=e[0],x=e[1],c=e[2],h=e[3];return r[0]=v*s+h*a+x*t-c*i,r[1]=x*s+h*i+c*a-v*t,r[2]=c*s+h*t+v*i-x*a,r[3]=h*s-v*a-x*i-c*t,v=e[4],x=e[5],c=e[6],h=e[7],r[4]=v*s+h*a+x*t-c*i,r[5]=x*s+h*i+c*a-v*t,r[6]=c*s+h*t+v*i-x*a,r[7]=h*s-v*a-x*i-c*t,r}function Ha(r,e,n){var a=e[0],i=e[1],t=e[2],s=e[3],v=n[0],x=n[1],c=n[2],h=n[3];return r[0]=a*h+s*v+i*c-t*x,r[1]=i*h+s*x+t*v-a*c,r[2]=t*h+s*c+a*x-i*v,r[3]=s*h-a*v-i*x-t*c,v=n[4],x=n[5],c=n[6],h=n[7],r[4]=a*h+s*v+i*c-t*x,r[5]=i*h+s*x+t*v-a*c,r[6]=t*h+s*c+a*x-i*v,r[7]=s*h-a*v-i*x-t*c,r}function Wa(r,e,n,a){if(Math.abs(a)<o)return P1(r,e);var i=Math.hypot(n[0],n[1],n[2]);a=a*.5;var t=Math.sin(a),s=t*n[0]/i,v=t*n[1]/i,x=t*n[2]/i,c=Math.cos(a),h=e[0],p=e[1],l=e[2],f=e[3];r[0]=h*c+f*s+p*x-l*v,r[1]=p*c+f*v+l*s-h*x,r[2]=l*c+f*x+h*v-p*s,r[3]=f*c-h*s-p*v-l*x;var m=e[4],g=e[5],M=e[6],y=e[7];return r[4]=m*c+y*s+g*x-M*v,r[5]=g*c+y*v+M*s-m*x,r[6]=M*c+y*x+m*v-g*s,r[7]=y*c-m*s-g*v-M*x,r}function Za(r,e,n){return r[0]=e[0]+n[0],r[1]=e[1]+n[1],r[2]=e[2]+n[2],r[3]=e[3]+n[3],r[4]=e[4]+n[4],r[5]=e[5]+n[5],r[6]=e[6]+n[6],r[7]=e[7]+n[7],r}function z1(r,e,n){var a=e[0],i=e[1],t=e[2],s=e[3],v=n[4],x=n[5],c=n[6],h=n[7],p=e[4],l=e[5],f=e[6],m=e[7],g=n[0],M=n[1],y=n[2],R=n[3];return r[0]=a*R+s*g+i*y-t*M,r[1]=i*R+s*M+t*g-a*y,r[2]=t*R+s*y+a*M-i*g,r[3]=s*R-a*g-i*M-t*y,r[4]=a*h+s*v+i*c-t*x+p*R+m*g+l*y-f*M,r[5]=i*h+s*x+t*v-a*c+l*R+m*M+f*g-p*y,r[6]=t*h+s*c+a*x-i*v+f*R+m*y+p*M-l*g,r[7]=s*h-a*v-i*x-t*c+m*R-p*g-l*M-f*y,r}var Qa=z1;function ka(r,e,n){return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r[4]=e[4]*n,r[5]=e[5]*n,r[6]=e[6]*n,r[7]=e[7]*n,r}var T1=sr;function Ja(r,e,n,a){var i=1-a;return T1(e,n)<0&&(a=-a),r[0]=e[0]*i+n[0]*a,r[1]=e[1]*i+n[1]*a,r[2]=e[2]*i+n[2]*a,r[3]=e[3]*i+n[3]*a,r[4]=e[4]*i+n[4]*a,r[5]=e[5]*i+n[5]*a,r[6]=e[6]*i+n[6]*a,r[7]=e[7]*i+n[7]*a,r}function Ka(r,e){var n=cr(e);return r[0]=-e[0]/n,r[1]=-e[1]/n,r[2]=-e[2]/n,r[3]=e[3]/n,r[4]=-e[4]/n,r[5]=-e[5]/n,r[6]=-e[6]/n,r[7]=e[7]/n,r}function $a(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r[3]=e[3],r[4]=-e[4],r[5]=-e[5],r[6]=-e[6],r[7]=e[7],r}var L1=vr,ua=L1,cr=xr,ri=cr;function ei(r,e){var n=cr(e);if(n>0){n=Math.sqrt(n);var a=e[0]/n,i=e[1]/n,t=e[2]/n,s=e[3]/n,v=e[4],x=e[5],c=e[6],h=e[7],p=a*v+i*x+t*c+s*h;r[0]=a,r[1]=i,r[2]=t,r[3]=s,r[4]=(v-a*p)/n,r[5]=(x-i*p)/n,r[6]=(c-t*p)/n,r[7]=(h-s*p)/n}return r}function ni(r){return"quat2("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+")"}function ai(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]}function ii(r,e){var n=r[0],a=r[1],i=r[2],t=r[3],s=r[4],v=r[5],x=r[6],c=r[7],h=e[0],p=e[1],l=e[2],f=e[3],m=e[4],g=e[5],M=e[6],y=e[7];return Math.abs(n-h)<=o*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(a-p)<=o*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(i-l)<=o*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(t-f)<=o*Math.max(1,Math.abs(t),Math.abs(f))&&Math.abs(s-m)<=o*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(v-g)<=o*Math.max(1,Math.abs(v),Math.abs(g))&&Math.abs(x-M)<=o*Math.max(1,Math.abs(x),Math.abs(M))&&Math.abs(c-y)<=o*Math.max(1,Math.abs(c),Math.abs(y))}var Xr={};b(Xr,{add:()=>ci,angle:()=>Ii,ceil:()=>hi,clone:()=>ti,copy:()=>vi,create:()=>S1,cross:()=>Ei,dist:()=>bi,distance:()=>O1,div:()=>Vi,divide:()=>N1,dot:()=>Ai,equals:()=>_i,exactEquals:()=>Oi,floor:()=>pi,forEach:()=>Xi,fromValues:()=>si,inverse:()=>di,len:()=>qi,length:()=>q1,lerp:()=>Ri,max:()=>li,min:()=>fi,mul:()=>Fi,multiply:()=>Y1,negate:()=>yi,normalize:()=>oi,random:()=>wi,rotate:()=>Si,round:()=>Mi,scale:()=>mi,scaleAndAdd:()=>gi,set:()=>xi,sqrDist:()=>Ci,sqrLen:()=>Ui,squaredDistance:()=>_1,squaredLength:()=>D1,str:()=>Ni,sub:()=>Di,subtract:()=>I1,transformMat2:()=>Pi,transformMat2d:()=>zi,transformMat3:()=>Ti,transformMat4:()=>Li,zero:()=>Yi});function S1(){var r=new z(2);return z!=Float32Array&&(r[0]=0,r[1]=0),r}function ti(r){var e=new z(2);return e[0]=r[0],e[1]=r[1],e}function si(r,e){var n=new z(2);return n[0]=r,n[1]=e,n}function vi(r,e){return r[0]=e[0],r[1]=e[1],r}function xi(r,e,n){return r[0]=e,r[1]=n,r}function ci(r,e,n){return r[0]=e[0]+n[0],r[1]=e[1]+n[1],r}function I1(r,e,n){return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r}function Y1(r,e,n){return r[0]=e[0]*n[0],r[1]=e[1]*n[1],r}function N1(r,e,n){return r[0]=e[0]/n[0],r[1]=e[1]/n[1],r}function hi(r,e){return r[0]=Math.ceil(e[0]),r[1]=Math.ceil(e[1]),r}function pi(r,e){return r[0]=Math.floor(e[0]),r[1]=Math.floor(e[1]),r}function fi(r,e,n){return r[0]=Math.min(e[0],n[0]),r[1]=Math.min(e[1],n[1]),r}function li(r,e,n){return r[0]=Math.max(e[0],n[0]),r[1]=Math.max(e[1],n[1]),r}function Mi(r,e){return r[0]=Math.round(e[0]),r[1]=Math.round(e[1]),r}function mi(r,e,n){return r[0]=e[0]*n,r[1]=e[1]*n,r}function gi(r,e,n,a){return r[0]=e[0]+n[0]*a,r[1]=e[1]+n[1]*a,r}function O1(r,e){var n=e[0]-r[0],a=e[1]-r[1];return Math.hypot(n,a)}function _1(r,e){var n=e[0]-r[0],a=e[1]-r[1];return n*n+a*a}function q1(r){var e=r[0],n=r[1];return Math.hypot(e,n)}function D1(r){var e=r[0],n=r[1];return e*e+n*n}function yi(r,e){return r[0]=-e[0],r[1]=-e[1],r}function di(r,e){return r[0]=1/e[0],r[1]=1/e[1],r}function oi(r,e){var n=e[0],a=e[1],i=n*n+a*a;return i>0&&(i=1/Math.sqrt(i)),r[0]=e[0]*i,r[1]=e[1]*i,r}function Ai(r,e){return r[0]*e[0]+r[1]*e[1]}function Ei(r,e,n){var a=e[0]*n[1]-e[1]*n[0];return r[0]=r[1]=0,r[2]=a,r}function Ri(r,e,n,a){var i=e[0],t=e[1];return r[0]=i+a*(n[0]-i),r[1]=t+a*(n[1]-t),r}function wi(r,e){e=e||1;var n=F()*2*Math.PI;return r[0]=Math.cos(n)*e,r[1]=Math.sin(n)*e,r}function Pi(r,e,n){var a=e[0],i=e[1];return r[0]=n[0]*a+n[2]*i,r[1]=n[1]*a+n[3]*i,r}function zi(r,e,n){var a=e[0],i=e[1];return r[0]=n[0]*a+n[2]*i+n[4],r[1]=n[1]*a+n[3]*i+n[5],r}function Ti(r,e,n){var a=e[0],i=e[1];return r[0]=n[0]*a+n[3]*i+n[6],r[1]=n[1]*a+n[4]*i+n[7],r}function Li(r,e,n){var a=e[0],i=e[1];return r[0]=n[0]*a+n[4]*i+n[12],r[1]=n[1]*a+n[5]*i+n[13],r}function Si(r,e,n,a){var i=e[0]-n[0],t=e[1]-n[1],s=Math.sin(a),v=Math.cos(a);return r[0]=i*v-t*s+n[0],r[1]=i*s+t*v+n[1],r}function Ii(r,e){var n=r[0],a=r[1],i=e[0],t=e[1],s=Math.sqrt(n*n+a*a)*Math.sqrt(i*i+t*t),v=s&&(n*i+a*t)/s;return Math.acos(Math.min(Math.max(v,-1),1))}function Yi(r){return r[0]=0,r[1]=0,r}function Ni(r){return"vec2("+r[0]+", "+r[1]+")"}function Oi(r,e){return r[0]===e[0]&&r[1]===e[1]}function _i(r,e){var n=r[0],a=r[1],i=e[0],t=e[1];return Math.abs(n-i)<=o*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(a-t)<=o*Math.max(1,Math.abs(a),Math.abs(t))}var qi=q1,Di=I1,Fi=Y1,Vi=N1,bi=O1,Ci=_1,Ui=D1,Xi=function(){var r=S1();return function(e,n,a,i,t,s){var v,x;for(n||(n=2),a||(a=0),i?x=Math.min(i*n+a,e.length):x=e.length,v=a;v<x;v+=n)r[0]=e[v],r[1]=e[v+1],t(r,r,s),e[v]=r[0],e[v+1]=r[1];return e}}();var H=class{position=O.create();direction=O.fromValues(0,0,1);up=O.fromValues(0,1,0);projectionMatrix=D.create();viewMatrix=D.create();cameraMatrix=D.create();viewportWidth=0;viewportHeight=0;near=1;far=100;tpmVec=O.create();constructor(){}lookAt(...e){if(e.length==1)O.copy(this.tpmVec,e[0]);else if(e.length==3)O.set(this.tpmVec,...e);else throw new Error("Required 1 or 3 arguments");O.sub(this.tpmVec,this.tpmVec,this.position),O.normalize(this.tpmVec,this.tpmVec);let n=O.dot(this.tpmVec,this.up);V.equals(n,1)?O.negate(this.up,this.direction):V.equals(n,-1)&&O.copy(this.up,this.direction),O.copy(this.direction,this.tpmVec),O.cross(this.up,this.getRight(),this.direction),O.normalize(this.up,this.up)}getRight(){return O.cross(this.tpmVec,this.direction,this.up)}updateConstants(e){D.lookAt(this.viewMatrix,this.position,O.add(this.tpmVec,this.position,this.direction),this.up),D.invert(this.cameraMatrix,this.viewMatrix),e.projectionMatrix=this.projectionMatrix,e.viewMatrix=this.viewMatrix,e.cameraMatrix=this.cameraMatrix,e.cameraPosition=this.position}};var X=class{program;constructor(e,n){let a=this.compileShader(e,d.gl.VERTEX_SHADER),i=this.compileShader(n,d.gl.FRAGMENT_SHADER);if(this.program=d.gl.createProgram(),d.gl.attachShader(this.program,a),d.gl.attachShader(this.program,i),d.gl.linkProgram(this.program),!d.gl.getProgramParameter(this.program,d.gl.LINK_STATUS))throw console.log(d.gl.getProgramInfoLog(this.program)),new Error("program unable to link");this.attribs={positions:d.gl.getAttribLocation(this.program,"position"),normals:d.gl.getAttribLocation(this.program,"normal"),colors:d.gl.getAttribLocation(this.program,"color"),uvs:d.gl.getAttribLocation(this.program,"uv"),sizes:d.gl.getAttribLocation(this.program,"size")},this.uniforms={projectionMatrix:{type:"mat4",location:d.gl.getUniformLocation(this.program,"projectionMatrix")},modelViewMatrix:{type:"mat4",location:d.gl.getUniformLocation(this.program,"modelViewMatrix")},modelMatrix:{type:"mat4",location:d.gl.getUniformLocation(this.program,"modelMatrix")},normalMatrix:{type:"mat3",location:d.gl.getUniformLocation(this.program,"normalMatrix")},lightColor:{type:"vec3",location:d.gl.getUniformLocation(this.program,"lightColor")},lightDirection:{type:"vec3",location:d.gl.getUniformLocation(this.program,"lightDirection")},lightPosition:{type:"vec3",location:d.gl.getUniformLocation(this.program,"lightPosition")},cameraPosition:{type:"vec3",location:d.gl.getUniformLocation(this.program,"cameraPosition")},pointMultiplier:{type:"float",location:d.gl.getUniformLocation(this.program,"pointMultiplier")}}}activate(){d.gl.useProgram(this.program)}compileShader(e,n){let a=d.gl.createShader(n);if(d.gl.shaderSource(a,e),d.gl.compileShader(a),!d.gl.getShaderParameter(a,d.gl.COMPILE_STATUS))throw console.log(d.gl.getShaderInfoLog(a)),new Error("shader unable to compile");return a}};U(X,"SIMPLE_VS",`
    uniform mat4 modelViewMatrix;
    uniform mat4 projectionMatrix;

    attribute vec3 position;
    attribute vec4 color;

    varying vec4 vColor;

    void main(void) {
        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
        vColor = color;
    }
    `),U(X,"SIMPLE_FS",`
    precision mediump float;

    varying vec4 vColor;

    void main(void) {
        gl_FragColor = vColor;
    }
    `),U(X,"TEXTURE_VS",`
    uniform mat4 modelViewMatrix;
    uniform mat4 projectionMatrix;

    attribute vec3 position;
    attribute vec4 color;
    attribute vec2 uv;

    varying vec4 vColor;
    varying vec2 vUv;

    void main(void) {
        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
        vColor = color;
        vUv = uv;
    }
    `),U(X,"TEXTURE_FS",`
    precision mediump float;

    varying vec4 vColor;
    varying vec2 vUv;

    uniform sampler2D tex;

    void main(void) {
        gl_FragColor = vColor * texture2D(tex, vUv);
    }
    `),U(X,"PARTICLE_VS",`
    attribute vec3 position;
    attribute vec4 color;
    attribute float size;
    
    uniform float pointMultiplier;
    uniform mat4 projectionMatrix;
    uniform mat4 modelViewMatrix;
    
    varying vec4 vColor;
    
    void main(void) {
        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
        gl_PointSize = size * pointMultiplier / gl_Position.w;
        vColor = color;
    }
    `),U(X,"PARTICLE_FS",`
    precision mediump float;
    
    uniform sampler2D tex;
    
    varying vec4 vColor;
    
    
    void main(void) {
        vec4 texColor = texture2D(tex, gl_PointCoord);
        gl_FragColor = vec4(vColor.rgb * texColor.rgb * texColor.a, vColor.a);
    }
    `);var j=class{buffers=[];vertexCount=0;constructor(){this.onInit()}onInit(){}bufferData(e,n,a){let i=d.gl.createBuffer();a=="index"?(d.gl.bindBuffer(d.gl.ELEMENT_ARRAY_BUFFER,i),d.gl.bufferData(d.gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(e),d.gl.STATIC_DRAW),this.vertexCount=e.length):(d.gl.bindBuffer(d.gl.ARRAY_BUFFER,i),d.gl.bufferData(d.gl.ARRAY_BUFFER,new Float32Array(e),d.gl.STATIC_DRAW)),this.buffers.push({name:a,size:n,data:e,buffer:i})}bind(e){for(let n of this.buffers){let a=e.shaderData.attribs[n.name];a!=-1&&(n.name=="index"?d.gl.bindBuffer(d.gl.ELEMENT_ARRAY_BUFFER,n.buffer):(d.gl.bindBuffer(d.gl.ARRAY_BUFFER,n.buffer),d.gl.vertexAttribPointer(a,n.size,d.gl.FLOAT,!1,0,0),d.gl.enableVertexAttribArray(a)))}}draw(){d.gl.drawElements(d.gl.TRIANGLES,this.vertexCount,d.gl.UNSIGNED_SHORT,0)}};var hr=class extends j{constructor(){super()}onInit(){let e=[-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5],n=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0],a=[0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1],i=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],t=[1,0,0,1,0,1,0,1,0,0,1,1,1,1,0,1,1,0,1,1,0,1,1,1],s=[];for(let v=0;v<6;++v)for(let x=0;x<4;++x)for(let c=0;c<4;++c)s.push(t[v*4+c]);this.bufferData(e,3,"positions"),this.bufferData(n,3,"normals"),this.bufferData(s,4,"colors"),this.bufferData(a,2,"uvs"),this.bufferData(i,0,"index")}};var pr=class{shaderData;uniforms=new Map;constructor(e){this.shaderData=e}setUniform(e,n){this.uniforms.set(e,n)}activate(){this.shaderData.activate()}bind(e){for(let n in this.shaderData.uniforms){let a=this.shaderData.uniforms[n],i=e[n];if(this.uniforms.has(n)&&(i=this.uniforms.get(n)),i&&a.location){let t=a.type,s=a.location;switch(t){case"mat4":d.gl.uniformMatrix4fv(s,!1,i);break;case"mat3":d.gl.uniformMatrix3fv(s,!1,val);break;case"vec4":d.gl.uniform4fv(s,i);break;case"vec3":d.gl.uniform3fv(s,i);break;case"vec2":d.gl.uniform2fv(s,i);break;case"float":d.gl.uniform1f(s,i);break}}}}};var fr=class{id;constructor(e){this.id=d.gl.createTexture(),d.gl.bindTexture(d.gl.TEXTURE_2D,this.id),d.gl.texImage2D(d.gl.TEXTURE_2D,0,d.gl.RGBA,d.gl.RGBA,d.gl.UNSIGNED_BYTE,e),d.gl.generateMipmap(d.gl.TEXTURE_2D),d.gl.texParameteri(d.gl.TEXTURE_2D,d.gl.TEXTURE_MIN_FILTER,d.gl.LINEAR_MIPMAP_LINEAR),d.gl.texParameteri(d.gl.TEXTURE_2D,d.gl.TEXTURE_MAG_FILTER,d.gl.LINEAR),d.gl.bindTexture(d.gl.TEXTURE_2D,null)}bind(){d.gl.bindTexture(d.gl.TEXTURE_2D,this.id)}};var lr=class{mesh;shader;texture;position=O.create();rotation=G.create();scale=O.fromValues(1,1,1);constructor(e,n,a){this.mesh=e,this.shader=n,this.texture=a}draw(e){this.shader.activate();let n=D.create();D.fromRotationTranslationScale(n,this.rotation,this.position,this.scale);let a=e.viewMatrix,i=D.create();D.multiply(i,a,n);let t=B.create();B.fromMat4(t,n),B.invert(t,t),B.transpose(t,t),this.shader.setUniform("modelViewMatrix",i),this.shader.setUniform("modelMatrix",n),this.shader.setUniform("normalMatrix",t),this.shader.bind(e),this.mesh.bind(this.shader),this.mesh.draw()}};var Mr=class extends H{fov;constructor(e,n,a){super(),this.fov=e,this.viewportWidth=n,this.viewportHeight=a,this.updateProjection()}updateProjection(){let e=this.viewportWidth/this.viewportHeight;D.perspective(this.projectionMatrix,this.fov/180*Math.PI,e,this.near,this.far)}};var mr=class extends j{onInit(){let e=[-.5,.5,0,.5,.5,0,.5,-.5,0,-.5,-.5,0],n=[0,0,1,0,0,1,0,0,1,0,0,1],a=[1,0,0,1,0,1,0,1,0,0,1,1,1,1,1,1],i=[0,0,1,0,1,1,0,1],t=[0,1,2,0,2,3];this.bufferData(e,3,"positions"),this.bufferData(n,3,"normals"),this.bufferData(a,4,"colors"),this.bufferData(i,2,"uvs"),this.bufferData(t,0,"index")}};var gr=class{};var d=class{static async init(e){this.graphics=new K(e),this.files=new J,this.input=new gr,e.preload(),await this.files.waitForAssetsToLoad(),e.create(),addEventListener("resize",()=>this.graphics.onResize()),this.graphics.onResize(),this.graphics.onResume()}static get gl(){return this.graphics.gl}};U(d,"graphics"),U(d,"files"),U(d,"input");export{yr as Game,d as Gol,F1 as glMatrix,V1 as graphics};
//# sourceMappingURL=goliath.js.map
